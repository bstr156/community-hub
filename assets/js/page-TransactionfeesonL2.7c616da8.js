(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{698:function(e,t,a){"use strict";a.r(t);var s=a(2),r=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"understanding-the-basics"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#understanding-the-basics"}},[e._v("#")]),e._v(" Understanding the basics")]),e._v(" "),t("p",[e._v("Transaction fees on Rollux work a lot like fees on Syscoin NEVM or Ethereum.\nHowever, Layer 2 introduces some new paradigms that means it can never be exactly like Ethereum.\nLuckily, Rollux's EVM equivalence makes these differences easy to understand and even easier to handle within your app.\nLet's take a look at the two sources of cost in a transaction on Rollux: the L2 execution fee and the L1 data/security fee.")]),e._v(" "),t("h3",{attrs:{id:"the-l2-execution-fee"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#the-l2-execution-fee"}},[e._v("#")]),e._v(" The L2 execution fee")]),e._v(" "),t("p",[e._v("Just like on Syscoin NEVM, transactions on Rollux have to pay "),t("strong",[e._v("gas")]),e._v(" for the amount of computation and storage that they use.\nEvery L2 transaction will pay some "),t("strong",[e._v("execution fee")]),e._v(", equal to the amount of gas used by the transaction multiplied by the gas price attached to the transaction.\nThis is exactly how fees work on Ethereum and Syscoin with the added bonus that gas prices on Rollux are seriously low.")]),e._v(" "),t("p",[e._v("Here's the (simple) math:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("l2_execution_fee = transaction_gas_price * l2_gas_used\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("The amount of L2 gas used depends on the particular transaction that you're trying to send.\nThanks to EVM equivalence, transactions typically use approximately the same amount of gas on Rollux as they do on Syscoin or Ethereum.")]),e._v(" "),t("h3",{attrs:{id:"the-l1-data-fee"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#the-l1-data-fee"}},[e._v("#")]),e._v(" The L1 data fee")]),e._v(" "),t("p",[e._v("Rollux differs from Syscoin NEVM and Ethereum because all transactions on Rollux are also published to Syscoin.\nThis step is crucial to the security properties of Rollux because it means that all of the data you need to sync a Rollux node is always publicly available on Syscoin.\nIt's what makes Rollux an L2.")]),e._v(" "),t("p",[e._v("Users on Rollux have to pay for the cost of submitting their transactions to Syscoin.\nWe call this the "),t("strong",[e._v("L1 data fee")]),e._v(", and it's the primary discrepancy between Rollux and Syscoin. Because of "),t("RouterLink",{attrs:{to:"/docs/developers/sys/PoDA.html"}},[e._v("PoDA (Proof of Data Availability)")]),e._v(", the L1 data fee with Rollux is typically very low, much lower in fact than what you would pay for using Optimism on Ethereum today.")],1),e._v(" "),t("p",[e._v("This fee is based on four factors:")]),e._v(" "),t("ol",[t("li",[e._v("The current gas price on Syscoin.")]),e._v(" "),t("li",[e._v("The gas cost to publish the transaction through PoDA to the Syscoin UTXO chain.")]),e._v(" "),t("li",[e._v("A fixed overhead cost denominated in gas. This is currently set to 2100.")]),e._v(" "),t("li",[e._v("A dynamic overhead cost which scales the L1 fee paid by a fixed number. This is currently set to 1.0.")])]),e._v(" "),t("p",[e._v("Here's the math:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("l1_data_fee = l1_gas_price * (tx_data_gas + fixed_overhead) * dynamic_overhead\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("Where "),t("code",[e._v("tx_data_gas")]),e._v(" is:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("tx_data_gas = count_zero_bytes(tx_data) * 4 + count_non_zero_bytes(tx_data) * 16\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("You can read the parameter values from the "),t("a",{attrs:{href:"https://explorer.rollux.com/address/0x420000000000000000000000000000000000000F",target:"_blank",rel:"noopener noreferrer"}},[e._v("gas oracle contract"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("Syscoin has limited support for adding custom transaction types.\nAs a result, unlike the L2 execution fee, "),t("strong",[e._v("users are not able to set limits for the L1 data fee that they may be charged")]),e._v(".\nThe L1 gas price used to charge the data fee is automatically updated when new data is received from Syscoin.\n"),t("strong",[e._v("Changes in gas costs on the Syscoin L1 can mean users pay a higher or lower-than-estimated L1 data fee, by up to 25%. This difference is capped at 25%.")])])]),e._v(" "),t("h2",{attrs:{id:"stuff-to-keep-in-mind"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stuff-to-keep-in-mind"}},[e._v("#")]),e._v(" Stuff to keep in mind")]),e._v(" "),t("h3",{attrs:{id:"sending-transactions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sending-transactions"}},[e._v("#")]),e._v(" Sending transactions")]),e._v(" "),t("p",[e._v("The process of sending a transaction on Rollux is identical to the process of sending a transaction on Syscoin NEVM or Ethereum.\nWhen sending a transaction, you should provide a gas price greater than or equal to the current L2 gas price.\nLike on Ethereum, you can query this gas price with the "),t("code",[e._v("eth_gasPrice")]),e._v(" RPC method.\nSimilarly, you should set your transaction gas limit in the same way that you would set your transaction gas limit on Ethereum (e.g. via "),t("code",[e._v("eth_estimateGas")]),e._v(").")]),e._v(" "),t("h3",{attrs:{id:"responding-to-gas-price-updates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#responding-to-gas-price-updates"}},[e._v("#")]),e._v(" Responding to gas price updates")]),e._v(" "),t("p",[e._v("Gas prices on L2 default to 0.001 Gwei but can increase dynamically if the network is congested.\nWhen this happens, the lowest fee that the network will accept increases.")]),e._v(" "),t("h3",{attrs:{id:"displaying-fees-to-users"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#displaying-fees-to-users"}},[e._v("#")]),e._v(" Displaying fees to users")]),e._v(" "),t("p",[e._v("Many Ethereum applications display estimated fees to users by multiplying the gas price by the gas limit.\nHowever, as discussed earlier, users on Rollux are charged both an L2 execution fee and an L1 data fee.\nAs a result, you should display the sum of both of these fees to give users the most accurate estimate of the total cost of a transaction.")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/SYS-Labs/rollux-tutorial/tree/main/sdk-estimate-gas",target:"_blank",rel:"noopener noreferrer"}},[e._v("See here for a code sample using the JavaScript SDK"),t("OutboundLink")],1)]),e._v(" "),t("h4",{attrs:{id:"estimating-the-l2-execution-fee"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#estimating-the-l2-execution-fee"}},[e._v("#")]),e._v(" Estimating the L2 execution fee")]),e._v(" "),t("p",[e._v("You can estimate the L2 execution fee by multiplying the gas price by the gas limit, just like on Ethereum.")]),e._v(" "),t("h4",{attrs:{id:"estimating-the-l1-data-fee"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#estimating-the-l1-data-fee"}},[e._v("#")]),e._v(" Estimating the L1 data fee")]),e._v(" "),t("p",[e._v("You can use the SDK "),t("a",{attrs:{href:"https://github.com/SYS-Labs/rollux-tutorial/tree/main/sdk-estimate-gas",target:"_blank",rel:"noopener noreferrer"}},[e._v("(see here)"),t("OutboundLink")],1),e._v(".\nAlternatively, you can estimate the L1 data fee using the "),t("code",[e._v("GasPriceOracle")]),e._v(" predeployed smart contract located at "),t("a",{attrs:{href:"https://explorer.rollux.com/address/0x420000000000000000000000000000000000000F",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("0x420000000000000000000000000000000000000F")]),t("OutboundLink")],1),e._v(".\n"),t("a",{attrs:{href:"https://github.com/SYS-Labs/rollux/blob/develop/packages/contracts/contracts/L2/predeploys/OVM_GasPriceOracle.sol",target:"_blank",rel:"noopener noreferrer"}},[e._v("The "),t("code",[e._v("GasPriceOracle")]),e._v(" contract"),t("OutboundLink")],1),e._v(" is located at the same address on every Rollux network (mainnet and Tanenbaum testnet).\nTo do so, call "),t("code",[e._v("GasPriceOracle.getL1Fee(<unsigned RLP encoded transaction>)")]),e._v(".")]),e._v(" "),t("h4",{attrs:{id:"estimating-the-total-fee"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#estimating-the-total-fee"}},[e._v("#")]),e._v(" Estimating the total fee")]),e._v(" "),t("p",[e._v("You can estimate the total fee by combining your estimates for the L2 execution fee and L1 data fee.")]),e._v(" "),t("h3",{attrs:{id:"sending-max-sys"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sending-max-sys"}},[e._v("#")]),e._v(" Sending max SYS")]),e._v(" "),t("p",[e._v("Sending the maximum amount of SYS that a user has in their wallet is a relatively common use case.\nWhen doing this, you will need to subtract the estimated L2 execution fee and the estimated L1 data fee from the amount of SYS the user wants to send.\nUse the logic described above for estimating the total fee.")]),e._v(" "),t("h2",{attrs:{id:"common-rpc-errors"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#common-rpc-errors"}},[e._v("#")]),e._v(" Common RPC Errors")]),e._v(" "),t("h3",{attrs:{id:"insufficient-funds"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#insufficient-funds"}},[e._v("#")]),e._v(" Insufficient funds")]),e._v(" "),t("ul",[t("li",[e._v("Error code: "),t("code",[e._v("-32000")])]),e._v(" "),t("li",[e._v("Error message: "),t("code",[e._v("invalid transaction: insufficient funds for l1Fee + l2Fee + value")])])]),e._v(" "),t("p",[e._v("You'll get this error when attempting to send a transaction and you don't have enough SYS to pay for the value of the transaction, the L2 execution fee, and the L1 data fee.\nYou might get this error when attempting to send max SYS if you aren't properly accounting for both the L2 execution fee and the L1 data fee.")]),e._v(" "),t("h3",{attrs:{id:"gas-price-too-low"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gas-price-too-low"}},[e._v("#")]),e._v(" Gas price too low")]),e._v(" "),t("ul",[t("li",[e._v("Error code: "),t("code",[e._v("-32000")])]),e._v(" "),t("li",[e._v("Error message: "),t("code",[e._v("gas price too low: X wei, use at least tx.gasPrice = Y wei")])])]),e._v(" "),t("p",[e._v("This is a custom RPC error that Rollux returns when a transaction is rejected because the gas price is too low.\nSee the section on "),t("a",{attrs:{href:"#responding-to-gas-price-updates"}},[e._v("Responding to gas price updates")]),e._v(" for more information.")]),e._v(" "),t("h3",{attrs:{id:"gas-price-too-high"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gas-price-too-high"}},[e._v("#")]),e._v(" Gas price too high")]),e._v(" "),t("ul",[t("li",[e._v("Error code: "),t("code",[e._v("-32000")])]),e._v(" "),t("li",[e._v("Error message: "),t("code",[e._v("gas price too high: X wei, use at most tx.gasPrice = Y wei")])])]),e._v(" "),t("p",[e._v("This is a custom RPC error that Rollux returns when a transaction is rejected because the gas price is too high.\nWe include this as a safety measure to prevent users from accidentally sending a transaction with an extremely high L2 gas price.\nSee the section on "),t("a",{attrs:{href:"#responding-to-gas-price-updates"}},[e._v("Responding to gas price updates")]),e._v(" for more information.")])])}),[],!1,null,null,null);t.default=r.exports},792:function(e,t,a){"use strict";a.r(t);var s=a(2),r=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"understanding-the-basics"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#understanding-the-basics"}},[e._v("#")]),e._v(" Understanding the basics")]),e._v(" "),t("p",[e._v("Transaction fees on Optimism work a lot like fees on Ethereum.\nHowever, Layer 2 introduces some new paradigms that means it can never be exactly like Ethereum.\nLuckily, Optimism's "),t("a",{attrs:{href:"https://medium.com/ethereum-optimism/introducing-evm-equivalence-5c2021deb306",target:"_blank",rel:"noopener noreferrer"}},[e._v("EVM equivalence"),t("OutboundLink")],1),e._v(" makes these differences easy to understand and even easier to handle within your app.\nLet's take a look at the two sources of cost in a transaction on Optimism: the L2 execution fee and the L1 data/security fee.")]),e._v(" "),t("h3",{attrs:{id:"the-l2-execution-fee"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#the-l2-execution-fee"}},[e._v("#")]),e._v(" The L2 execution fee")]),e._v(" "),t("p",[e._v("Just like on Ethereum, transactions on Optimism have to pay "),t("strong",[e._v("gas")]),e._v(" for the amount of computation and storage that they use.\nEvery L2 transaction will pay some "),t("strong",[e._v("execution fee")]),e._v(", equal to the amount of gas used by the transaction multiplied by the gas price attached to the transaction.\nThis is exactly how fees work on Ethereum with the added bonus that gas prices on Optimism are seriously low.")]),e._v(" "),t("p",[e._v("Here's the (simple) math:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("l2_execution_fee = transaction_gas_price * l2_gas_used\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("The amount of L2 gas used depends on the particular transaction that you're trying to send.\nThanks to "),t("a",{attrs:{href:"https://medium.com/ethereum-optimism/introducing-evm-equivalence-5c2021deb306",target:"_blank",rel:"noopener noreferrer"}},[e._v("EVM equivalence"),t("OutboundLink")],1),e._v(", transactions typically use approximately the same amount of gas on Optimism as they do on Ethereum.\nGas prices fluctuate with time and congestion, but you can always check the current estimated L2 gas price on the "),t("a",{attrs:{href:"https://public-grafana.optimism.io/d/9hkhMxn7z/public-dashboard?orgId=1&refresh=5m",target:"_blank",rel:"noopener noreferrer"}},[e._v("public Optimism dashboard"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"the-l1-data-fee"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#the-l1-data-fee"}},[e._v("#")]),e._v(" The L1 data fee")]),e._v(" "),t("p",[e._v("Optimism differs from Ethereum because all transactions on Optimism are also published to Ethereum.\nThis step is crucial to the security properties of Optimism because it means that all of the data you need to sync an Optimism node is always publicly available on Ethereum.\nIt's what makes Optimism an L2.")]),e._v(" "),t("p",[e._v("Users on Optimism have to pay for the cost of submitting their transactions to Ethereum.\nWe call this the "),t("strong",[e._v("L1 data fee")]),e._v(", and it's the primary discrepancy between Optimism (and other L2s) and Ethereum.\nBecause the cost of gas is so expensive on Ethereum, the L1 data fee typically dominates the total cost of a transaction on Optimism.\nThis fee is based on four factors:")]),e._v(" "),t("ol",[t("li",[e._v("The current gas price on Ethereum.")]),e._v(" "),t("li",[e._v("The gas cost to publish the transaction to Ethereum. This scales roughly with the size of the transaction (in bytes).")]),e._v(" "),t("li",[e._v("A fixed overhead cost denominated in gas. This is currently set to 2100.")]),e._v(" "),t("li",[e._v("A dynamic overhead cost which scales the L1 fee paid by a fixed number. This is currently set to 1.0.")])]),e._v(" "),t("p",[e._v("Here's the math:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("l1_data_fee = l1_gas_price * (tx_data_gas + fixed_overhead) * dynamic_overhead\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("Where "),t("code",[e._v("tx_data_gas")]),e._v(" is:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("tx_data_gas = count_zero_bytes(tx_data) * 4 + count_non_zero_bytes(tx_data) * 16\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("You can read the parameter values from the "),t("a",{attrs:{href:"https://explorer.optimism.io/address/0x420000000000000000000000000000000000000F#readContract",target:"_blank",rel:"noopener noreferrer"}},[e._v("gas oracle contract"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("Ethereum has limited support for adding custom transaction types.\nAs a result, unlike the L2 execution fee, "),t("strong",[e._v("users are not able to set limits for the L1 data fee that they may be charged")]),e._v(".\nThe L1 gas price used to charge the data fee is automatically updated when new data is received from Ethereum.\n"),t("strong",[e._v("Spikes in Ethereum gas prices may result in users paying a higher or lower than estimated L1 data fee, by up to 25%.")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://help.optimism.io/hc/en-us/articles/4416677738907-What-happens-if-the-L1-gas-price-spikes-while-a-transaction-is-in-process",target:"_blank",rel:"noopener noreferrer"}},[e._v("See here for a detailed explanation why the difference is capped at 25%"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("h2",{attrs:{id:"stuff-to-keep-in-mind"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stuff-to-keep-in-mind"}},[e._v("#")]),e._v(" Stuff to keep in mind")]),e._v(" "),t("h3",{attrs:{id:"sending-transactions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sending-transactions"}},[e._v("#")]),e._v(" Sending transactions")]),e._v(" "),t("p",[e._v("The process of sending a transaction on Optimism is identical to the process of sending a transaction on Ethereum.\nWhen sending a transaction, you should provide a gas price greater than or equal to the current L2 gas price.\nLike on Ethereum, you can query this gas price with the "),t("code",[e._v("eth_gasPrice")]),e._v(" RPC method.\nSimilarly, you should set your transaction gas limit in the same way that you would set your transaction gas limit on Ethereum (e.g. via "),t("code",[e._v("eth_estimateGas")]),e._v(").")]),e._v(" "),t("h3",{attrs:{id:"responding-to-gas-price-updates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#responding-to-gas-price-updates"}},[e._v("#")]),e._v(" Responding to gas price updates")]),e._v(" "),t("p",[e._v("Gas prices on L2 default to 0.001 Gwei but can increase dynamically if the network is congested.\nWhen this happens, the lowest fee that the network will accept increases.\nUnlike Ethereum, Optimism currently does not have a mempool to hold transactions with too low a fee.\nInstead, Optimism nodes will reject the transaction with the message "),t("code",[e._v("Fee too low")]),e._v(".\nYou may need to handle this case explicitly and retry the transaction with a new gas price when this happens.")]),e._v(" "),t("h3",{attrs:{id:"displaying-fees-to-users"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#displaying-fees-to-users"}},[e._v("#")]),e._v(" Displaying fees to users")]),e._v(" "),t("p",[e._v("Many Ethereum applications display estimated fees to users by multiplying the gas price by the gas limit.\nHowever, as discussed earlier, users on Optimism are charged both an L2 execution fee and an L1 data fee.\nAs a result, you should display the sum of both of these fees to give users the most accurate estimate of the total cost of a transaction.")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/ethereum-optimism/optimism-tutorial/tree/main/sdk-estimate-gas",target:"_blank",rel:"noopener noreferrer"}},[e._v("See here for a code sample using the JavaScript SDK"),t("OutboundLink")],1)]),e._v(" "),t("h4",{attrs:{id:"estimating-the-l2-execution-fee"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#estimating-the-l2-execution-fee"}},[e._v("#")]),e._v(" Estimating the L2 execution fee")]),e._v(" "),t("p",[e._v("You can estimate the L2 execution fee by multiplying the gas price by the gas limit, just like on Ethereum.")]),e._v(" "),t("h4",{attrs:{id:"estimating-the-l1-data-fee"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#estimating-the-l1-data-fee"}},[e._v("#")]),e._v(" Estimating the L1 data fee")]),e._v(" "),t("p",[e._v("You can use the SDK "),t("a",{attrs:{href:"https://github.com/ethereum-optimism/optimism-tutorial/tree/main/sdk-estimate-gas",target:"_blank",rel:"noopener noreferrer"}},[e._v("(see here)"),t("OutboundLink")],1),e._v(".\nAlternatively, you can estimate the L1 data fee using the "),t("code",[e._v("GasPriceOracle")]),e._v(" predeployed smart contract located at "),t("a",{attrs:{href:"https://explorer.optimism.io/address/0x420000000000000000000000000000000000000F",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("0x420000000000000000000000000000000000000F")]),t("OutboundLink")],1),e._v(".\n"),t("a",{attrs:{href:"https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/L2/predeploys/OVM_GasPriceOracle.sol",target:"_blank",rel:"noopener noreferrer"}},[e._v("The "),t("code",[e._v("GasPriceOracle")]),e._v(" contract"),t("OutboundLink")],1),e._v(" is located at the same address on every Optimism network (mainnet and testnet).\nTo do so, call "),t("code",[e._v("GasPriceOracle.getL1Fee(<unsigned RLP encoded transaction>)")]),e._v(".")]),e._v(" "),t("h4",{attrs:{id:"estimating-the-total-fee"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#estimating-the-total-fee"}},[e._v("#")]),e._v(" Estimating the total fee")]),e._v(" "),t("p",[e._v("You can estimate the total fee by combining your estimates for the L2 execution fee and L1 data fee.")]),e._v(" "),t("h3",{attrs:{id:"sending-max-eth"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sending-max-eth"}},[e._v("#")]),e._v(" Sending max ETH")]),e._v(" "),t("p",[e._v("Sending the maximum amount of ETH that a user has in their wallet is a relatively common use case.\nWhen doing this, you will need to subtract the estimated L2 execution fee and the estimated L1 data fee from the amount of ETH you want the user to send.\nUse the logic described above for estimating the total fee.")]),e._v(" "),t("h2",{attrs:{id:"common-rpc-errors"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#common-rpc-errors"}},[e._v("#")]),e._v(" Common RPC Errors")]),e._v(" "),t("h3",{attrs:{id:"insufficient-funds"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#insufficient-funds"}},[e._v("#")]),e._v(" Insufficient funds")]),e._v(" "),t("ul",[t("li",[e._v("Error code: "),t("code",[e._v("-32000")])]),e._v(" "),t("li",[e._v("Error message: "),t("code",[e._v("invalid transaction: insufficient funds for l1Fee + l2Fee + value")])])]),e._v(" "),t("p",[e._v("You'll get this error when attempting to send a transaction and you don't have enough ETH to pay for the value of the transaction, the L2 execution fee, and the L1 data fee.\nYou might get this error when attempting to send max ETH if you aren't properly accounting for both the L2 execution fee and the L1 data fee.")]),e._v(" "),t("h3",{attrs:{id:"gas-price-too-low"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gas-price-too-low"}},[e._v("#")]),e._v(" Gas price too low")]),e._v(" "),t("ul",[t("li",[e._v("Error code: "),t("code",[e._v("-32000")])]),e._v(" "),t("li",[e._v("Error message: "),t("code",[e._v("gas price too low: X wei, use at least tx.gasPrice = Y wei")])])]),e._v(" "),t("p",[e._v("This is a custom RPC error that Optimism returns when a transaction is rejected because the gas price is too low.\nSee the section on "),t("a",{attrs:{href:"#responding-to-gas-price-updates"}},[e._v("Responding to gas price updates")]),e._v(" for more information.")]),e._v(" "),t("h3",{attrs:{id:"gas-price-too-high"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gas-price-too-high"}},[e._v("#")]),e._v(" Gas price too high")]),e._v(" "),t("ul",[t("li",[e._v("Error code: "),t("code",[e._v("-32000")])]),e._v(" "),t("li",[e._v("Error message: "),t("code",[e._v("gas price too high: X wei, use at most tx.gasPrice = Y wei")])])]),e._v(" "),t("p",[e._v("This is a custom RPC error that Optimism returns when a transaction is rejected because the gas price is too high.\nWe include this as a safety measure to prevent users from accidentally sending a transaction with an extremely high L2 gas price.\nSee the section on "),t("a",{attrs:{href:"#responding-to-gas-price-updates"}},[e._v("Responding to gas price updates")]),e._v(" for more information.")])])}),[],!1,null,null,null);t.default=r.exports}}]);